javascript: !function(e){if("hackmd.io"!=window.location.host||"/recent"!=window.location.pathname)confirm("Please goto to HackMd homepage")&&(window.location.href="https://hackmd.io/recent");else{if("true"===function(e){for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),n=0;n<r.length;n++){for(var o=r[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}("loginstate")){var t,r=e.createElement("P");r.className="hide",r.id="result";var n=document.createElement("DIV");n.setAttribute("positin","width: 0%;"),n.appendChild(r);var o=e.createElement("DIV");o.className="progress-bar",o.setAttribute("style","width: 0%;"),o.setAttribute("role","progressbar"),o.setAttribute("aria-valuenow","0"),o.setAttribute("aria-valuemin","0"),o.setAttribute("aria-valuemax","100");var i=e.createElement("DIV");i.className="progress hide",i.id="progress_bar",i.appendChild(o),n.appendChild(i),e.querySelector(".cover-container").insertBefore(n,e.querySelector("#recent")),Promise.all(["https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.5/jszip.min.js","https://cdnjs.cloudflare.com/ajax/libs/jszip-utils/0.0.2/jszip-utils.min.js","https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"].map(function(t){var r=document.createElement("script");return r.src=t,e.body.appendChild(r),new Promise(function(e){r.onload=e})})).then(function(){var e=[],r=new XMLHttpRequest;r.open("get","https://hackmd.io/history",!0),r.send(null),r.onload=function(n){""==r.responseText?window.alert("Someing errors, please try later"):(e=JSON.parse(r.responseText).history,null!=(t=prompt("請選擇下載類型: a: 全部, s: 收藏, o: 其他(不包含收藏)","a"))&&("s"==t?e=e.filter(function(e,t,r){return e.pinned}):"o"==t?e=e.filter(function(e,t,r){return!e.pinned}):t="a",function(){for(var r=new JSZip,n={},i=[],l=0;l<e.length;l++){var c="https://hackmd.io/"+e[l].id+"/download",d=e[l].text.replace(/<|>|\?|\:|"|\/|\\|\*|\||;*/g,"")+".md";i.includes(d)?(n[d]=+!!n[d]+1,d=e[l].text.replace(/<|>|\?|\:|"|\/|\\|\*|\||;*/g,"")+"("+n[d]+").md"):i.push(d),r.file(d,o(c),{binary:!0})}r.generateAsync({type:"blob"},function(e){var t,r="progression : "+e.percent.toFixed(2)+" %";e.currentFile&&(r+=", current file = "+e.currentFile),a(r),t=0|e.percent,$("#progress_bar").removeClass("hide").find(".progress-bar").attr("aria-valuenow",t).css({width:t+"%"})}).then(function(e){var r="";"a"==t?r="_all":"s"==t&&(r="_star"),"o"==t&&(r="_other"),saveAs(e,"notes"+r+".zip"),a("done !")},function(e){s(e)})}()))};var n=window.Promise;n||(n=JSZip.external.Promise);function o(e){return new n(function(t,r){JSZipUtils.getBinaryContent(e,function(e,r){if(e){var n=e.toString();alert("A Page cannot download normally.\n"+n),t(n)}else t(r)})})}function i(){$("#result").removeClass().text("")}function a(e){i(),$("#result").addClass("alert alert-success").text(e)}function s(e){i(),$("#result").addClass("alert alert-danger").text(e)}JSZip.support.blob||s("This demo works only with a recent browser !")})}else window.alert("Please Login First")}}(document);