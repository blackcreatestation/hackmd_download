javascript: !function(e){if("hackmd.io"!=window.location.host||"/recent"!=window.location.pathname)confirm("Please goto to HackMd homepage")&&(window.location.href="https://hackmd.io/recent");else{if(function(e){for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}("loginstate")){var t,r=["https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.5/jszip.min.js","https://cdnjs.cloudflare.com/ajax/libs/jszip-utils/0.0.2/jszip-utils.min.js","https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"],n=e.createElement("P");n.className="hide",n.id="result";var i=document.createElement("DIV");i.setAttribute("positin","width: 0%;"),i.appendChild(n);var o=e.createElement("DIV");o.className="progress-bar",o.setAttribute("style","width: 0%;"),o.setAttribute("role","progressbar"),o.setAttribute("aria-valuenow","0"),o.setAttribute("aria-valuemin","0"),o.setAttribute("aria-valuemax","100");var s=e.createElement("DIV");s.className="progress hide",s.id="progress_bar",s.appendChild(o),i.appendChild(s),e.querySelector(".cover-container").insertBefore(i,e.querySelector("#recent"));for(var a=0;a<3;a++){var l=document.createElement("script");l.type="text/javascript",l.src=r[a],e.body.appendChild(l)}!function e(){void 0==window.saveAs||void 0==window.JSZipUtils||void 0==window.JSZip?setTimeout(e,1e3):function(){var e=[],r=new XMLHttpRequest;r.open("get","https://hackmd.io/history",!0),r.send(null),r.onload=function(n){""==r.responseText?window.alert("Someing errors, please try later"):(e=JSON.parse(r.responseText).history,null!=(t=prompt("請選擇下載類型: a: 全部, s: 收藏, o: 其他(不包含收藏)","a"))&&("s"==t?e=e.filter(function(e,t,r){return e.pinned}):"o"==t?e=e.filter(function(e,t,r){return!e.pinned}):t="a",function(){for(var r=new JSZip,n=[],o=0,l=1;o<e.length;o++){var c="https://hackmd.io/"+e[o].id+"/download",d=e[o].text.replace(/<|>|\?|\:|"|\/|\\|\*|\||;*/g,"")+".md";-1==n.indexOf(d)?n.push(d):(d=e[o].text.replace(/<|>|\?|\:|"|\/|\\|\*|\||;*/g,"")+"("+l+").md",l++),r.file(d,i(c),{binary:!0})}r.generateAsync({type:"blob"},function(e){var t,r="progression : "+e.percent.toFixed(2)+" %";e.currentFile&&(r+=", current file = "+e.currentFile),s(r),t=0|e.percent,$("#progress_bar").removeClass("hide").find(".progress-bar").attr("aria-valuenow",t).css({width:t+"%"})}).then(function(e){var r="";"a"==t?r="_all":"s"==t&&(r="_star"),"o"==t&&(r="_other"),saveAs(e,"notes"+r+".zip"),s("done !")},function(e){a(e)})}()))};var n=window.Promise;n||(n=JSZip.external.Promise);function i(e){return new n(function(t,r){JSZipUtils.getBinaryContent(e,function(e,n){e?r(e):t(n)})})}function o(){$("#result").removeClass().text("")}function s(e){o(),$("#result").addClass("alert alert-success").text(e)}function a(e){o(),$("#result").addClass("alert alert-danger").text(e)}JSZip.support.blob||a("This demo works only with a recent browser !")}()}()}else window.alert("Please Login First")}}(document);