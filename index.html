<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name='keywords' content='下載,文件,筆記,hackmd,download,匯出' />
    <meta name='author' content='hbdoy' />
    <meta name='description' content='HackMD 筆記打包下載' />
    <meta property="og:title" content="HackMD 筆記打包下載" />
    <meta property="og:description" content="一鍵打包">
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://hbdoy.github.io/hackmd_download/" />
    <meta property="og:image" content="./img/header_s2.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>HackMD 打包下載</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
        crossorigin="anonymous">
    <link rel="stylesheet" href="./css/style.css">
    <script src="js/wired-elements.bundled.min.js"></script>
</head>

<body>
    <div class="container-fluid" style="min-height: 100vh">
        <div class="row">
            <div class="col-md-10 offset-md-1">
                <div class="d-none d-md-block">
                    <h1 class="title my-3 text-hide">HackMD 打包下載</h1>
                    <h3 class="header mb-3 text-hide">自己的文件自己保存</h3>
                </div>
                <div class="d-block d-md-none">
                    <div class="title_s mt-3 mb-1"></div>
                    <div class="header_s1"></div>
                    <div class="header_s2 mb-3"></div>
                </div>
                <div class="col-8 offset-2">
                    <div class="d-flex justify-content-start">
                        <wired-card elevation="3" class="p-3 mr-md-5">
                            <h4>ReadMe</h4>
                            <p id="readme">
                                使用方法把下方按鈕拖到書籤列就好<a class="d-inline-block d-md-none" href="https://github.com/hbdoy/hackmd_download/blob/master/img/add.gif"
                                    targer="_blank">(範例)</a>。
                                <br> Chrome 上通過測試，其他瀏覽器使用方法請到
                                <a href="https://github.com/hbdoy/hackmd_download/blob/master/README.md" target="_blank">Github</a>
                                查看詳情。
                                <br> 非營利用途，如有侵權請立即告知。
                            </p>
                        </wired-card>
                        <div class="d-none d-md-block">
                            <img id="explainGif" class="img-fluid" src="./img/add.gif" alt="how to use">
                        </div>
                    </div>
                    <div class="d-flex justify-content-center mt-4">
                        <wired-button elevation="3" aria-label="Pack Notes">
                            <a id="bookmark" class="bookmark" href='javascript: !function(e){if("hackmd.io"!=window.location.host||"/recent"!=window.location.pathname)confirm("Please goto to HackMd homepage")&&(window.location.href="https://hackmd.io/recent");else{if("true"===function(e){for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),n=0;n<r.length;n++){for(var o=r[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}("loginstate")){var t,r=e.createElement("P");r.className="hide",r.id="result";var n=document.createElement("DIV");n.setAttribute("positin","width: 0%;"),n.appendChild(r);var o=e.createElement("DIV");o.className="progress-bar",o.setAttribute("style","width: 0%;"),o.setAttribute("role","progressbar"),o.setAttribute("aria-valuenow","0"),o.setAttribute("aria-valuemin","0"),o.setAttribute("aria-valuemax","100");var i=e.createElement("DIV");i.className="progress hide",i.id="progress_bar",i.appendChild(o),n.appendChild(i),e.querySelector(".cover-container").insertBefore(n,e.querySelector("#recent")),Promise.all(["https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.5/jszip.min.js","https://cdnjs.cloudflare.com/ajax/libs/jszip-utils/0.0.2/jszip-utils.min.js","https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"].map(function(t){var r=document.createElement("script");return r.src=t,e.body.appendChild(r),new Promise(function(e){r.onload=e})})).then(function(){var e=[],r=new XMLHttpRequest;r.open("get","https://hackmd.io/history",!0),r.send(null),r.onload=function(n){""==r.responseText?window.alert("Someing errors, please try later"):(e=JSON.parse(r.responseText).history,null!=(t=prompt("請選擇下載類型: a: 全部, s: 收藏, o: 其他(不包含收藏)","a"))&&("s"==t?e=e.filter(function(e,t,r){return e.pinned}):"o"==t?e=e.filter(function(e,t,r){return!e.pinned}):t="a",function(){for(var r=new JSZip,n={},i=[],l=0;l<e.length;l++){var c="https://hackmd.io/"+e[l].id+"/download",d=e[l].text.replace(/<|>|\?|\:|"|\/|\\|\*|\||;*/g,"")+".md";i.includes(d)?(n[d]=+!!n[d]+1,d=e[l].text.replace(/<|>|\?|\:|"|\/|\\|\*|\||;*/g,"")+"("+n[d]+").md"):i.push(d),r.file(d,o(c),{binary:!0})}r.generateAsync({type:"blob"},function(e){var t,r="progression : "+e.percent.toFixed(2)+" %";e.currentFile&&(r+=", current file = "+e.currentFile),a(r),t=0|e.percent,$("#progress_bar").removeClass("hide").find(".progress-bar").attr("aria-valuenow",t).css({width:t+"%"})}).then(function(e){var r="";"a"==t?r="_all":"s"==t&&(r="_star"),"o"==t&&(r="_other"),saveAs(e,"notes"+r+".zip"),a("done !")},function(e){s(e)})}()))};var n=window.Promise;n||(n=JSZip.external.Promise);function o(e){return new n(function(t,r){JSZipUtils.getBinaryContent(e,function(e,r){if(e){var n=e.toString();alert("A Page cannot download normally.\n"+n),t(n)}else t(r)})})}function i(){$("#result").removeClass().text("")}function a(e){i(),$("#result").addClass("alert alert-success").text(e)}function s(e){i(),$("#result").addClass("alert alert-danger").text(e)}JSZip.support.blob||s("This demo works only with a recent browser !")})}else window.alert("Please Login First")}}(document);'>
                                <i class="fas fa-bookmark"></i>
                                <span class="ml-2">Pack Notes</span>
                            </a>
                        </wired-button>
                    </div>
                    <textarea id="code-copy" cols="30" rows="10" hidden>javascript: !function(e){if("hackmd.io"!=window.location.host||"/recent"!=window.location.pathname)confirm("Please goto to HackMd homepage")&&(window.location.href="https://hackmd.io/recent");else{if("true"===function(e){for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),n=0;n<r.length;n++){for(var o=r[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}("loginstate")){var t,r=e.createElement("P");r.className="hide",r.id="result";var n=document.createElement("DIV");n.setAttribute("positin","width: 0%;"),n.appendChild(r);var o=e.createElement("DIV");o.className="progress-bar",o.setAttribute("style","width: 0%;"),o.setAttribute("role","progressbar"),o.setAttribute("aria-valuenow","0"),o.setAttribute("aria-valuemin","0"),o.setAttribute("aria-valuemax","100");var i=e.createElement("DIV");i.className="progress hide",i.id="progress_bar",i.appendChild(o),n.appendChild(i),e.querySelector(".cover-container").insertBefore(n,e.querySelector("#recent")),Promise.all(["https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.5/jszip.min.js","https://cdnjs.cloudflare.com/ajax/libs/jszip-utils/0.0.2/jszip-utils.min.js","https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"].map(function(t){var r=document.createElement("script");return r.src=t,e.body.appendChild(r),new Promise(function(e){r.onload=e})})).then(function(){var e=[],r=new XMLHttpRequest;r.open("get","https://hackmd.io/history",!0),r.send(null),r.onload=function(n){""==r.responseText?window.alert("Someing errors, please try later"):(e=JSON.parse(r.responseText).history,null!=(t=prompt("請選擇下載類型: a: 全部, s: 收藏, o: 其他(不包含收藏)","a"))&&("s"==t?e=e.filter(function(e,t,r){return e.pinned}):"o"==t?e=e.filter(function(e,t,r){return!e.pinned}):t="a",function(){for(var r=new JSZip,n={},i=[],l=0;l<e.length;l++){var c="https://hackmd.io/"+e[l].id+"/download",d=e[l].text.replace(/<|>|\?|\:|"|\/|\\|\*|\||;*/g,"")+".md";i.includes(d)?(n[d]=+!!n[d]+1,d=e[l].text.replace(/<|>|\?|\:|"|\/|\\|\*|\||;*/g,"")+"("+n[d]+").md"):i.push(d),r.file(d,o(c),{binary:!0})}r.generateAsync({type:"blob"},function(e){var t,r="progression : "+e.percent.toFixed(2)+" %";e.currentFile&&(r+=", current file = "+e.currentFile),a(r),t=0|e.percent,$("#progress_bar").removeClass("hide").find(".progress-bar").attr("aria-valuenow",t).css({width:t+"%"})}).then(function(e){var r="";"a"==t?r="_all":"s"==t&&(r="_star"),"o"==t&&(r="_other"),saveAs(e,"notes"+r+".zip"),a("done !")},function(e){s(e)})}()))};var n=window.Promise;n||(n=JSZip.external.Promise);function o(e){return new n(function(t,r){JSZipUtils.getBinaryContent(e,function(e,r){if(e){var n=e.toString();alert("A Page cannot download normally.\n"+n),t(n)}else t(r)})})}function i(){$("#result").removeClass().text("")}function a(e){i(),$("#result").addClass("alert alert-success").text(e)}function s(e){i(),$("#result").addClass("alert alert-danger").text(e)}JSZip.support.blob||s("This demo works only with a recent browser !")})}else window.alert("Please Login First")}}(document);</textarea>
                </div>
            </div>
        </div>
    </div>

    <script src="./js/clipboard.min.js"></script>
    <script src="./js/identify-browser.js"></script>
</body>

</html>